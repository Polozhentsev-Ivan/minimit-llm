name: "Build and Test"

on: [pull_request]

jobs:
    build:
        name: Setup&Build
        runs-on: ubuntu-latest
        container:
            image: python:3.12-slim
        steps:
          - name: Checkout
            uses: actions/checkout@v3
            
          - name: Setup Python
            uses: actions/setup-python@v5
            with:
                python-version: '3.12'
                cache: 'pip'
            
          - name: Install dependencies
            run: |
                pip install --upgrade uv
                uv venv .venv
                source .venv/bin/activate
                uv pip install -r pyproject.toml
            
          - name: Ruff lint check
            uses: astral-sh/ruff-action@v1
            with:
                args: check .
            
          - name: Run tests
            run: |
                uv run pytest -v
